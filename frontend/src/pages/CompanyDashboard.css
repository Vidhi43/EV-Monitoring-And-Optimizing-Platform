/* CompanyDashboard.css
   Improved contrast, brighter cards, clearer info-window + chart legend
*/

/* Layout root */
.company-dashboard-root,
.dashboard-layout {
  display: flex;
  min-height: 100vh;
  background: linear-gradient(180deg,#07161a,#041014);
  color: #e8fff4;
  font-family: "Segoe UI", Inter, system-ui, Arial, sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  box-sizing: border-box;
}

/* ---------------- Sidebar ---------------- */
.cd-sidebar,
.sidebar {
  width: 220px;
  background: linear-gradient(180deg,#042018,#03221c);
  padding: 18px;
  box-shadow: 2px 0 22px rgba(0,0,0,0.7);
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.cd-brand,
.sidebar-title {
  color: #7FFFB5;
  font-weight: 800;
  font-size: 18px;
}

/* Navigation */
.cd-nav,
.sidebar-nav {
  display: flex;
  flex-direction: column;
  gap: 8px;
  margin-top: 12px;
}

.cd-nav button,
.sidebar-nav button {
  background: transparent;
  border: none;
  color: #CFFEE2;
  padding: 10px;
  text-align: left;
  border-radius: 8px;
  cursor: pointer;
  transition: background .12s ease, color .12s ease, transform .06s;
  font-size: 14px;
}

.cd-nav button:hover,
.sidebar-nav button:hover {
  color: #E8FFEF;
  background: rgba(127,255,181,0.06);
  transform: translateY(-1px);
}

.cd-nav button.active,
.sidebar-nav button.active {
  color: #E8FFEF;
  font-weight: 800;
  background: linear-gradient(90deg, rgba(127,255,181,0.08), rgba(127,255,181,0.02));
  border-left: 3px solid #39D98A;
  padding-left: 8px;
}

/* Logout / primary buttons */
.btn-logout,
.logout {
  background: linear-gradient(90deg,#06B6D4,#10B981);
  color: #d0f5ea;
  border: none;
  padding: 10px 12px;
  border-radius: 10px;
  font-weight: 800;
  cursor: pointer;
  margin-top: auto;
  box-shadow: 0 10px 28px rgba(0,0,0,0.6);
}

.btn-logout:hover,
.logout:hover {
  transform: translateY(-2px);
  filter: brightness(1.03);
}

/* ---------------- Main area ---------------- */
.cd-main,
.main-content {
  flex: 1;
  padding: 22px 28px;
  overflow: auto;
  min-width: 0;
}

/* Header area */
.cd-header,
.main-header {
  display: flex;
  justify-content: space-between;
  gap: 16px;
  align-items: flex-start;
  margin-bottom: 14px;
  border-bottom: 1px solid rgba(127,255,181,0.04);
  padding-bottom: 12px;
}

.cd-header h1,
.main-header h1 {
  margin: 0;
  color: #E8FFF0;
  font-size: 24px;
  font-weight: 800;
}

.cd-header .sub,
.main-header p {
  margin: 0;
  color: #BFEFD6;
  font-size: 13px;
}

/* header controls */
.header-controls { display:flex; gap:12px; align-items:center; }
.kpi-small { color:#BFEFCE; font-size:13px; }

/* ---------------- Top Row: Map + KPIs ---------------- */
.top-row {
  display: flex;
  gap: 20px;
  align-items: flex-start;
  margin-bottom: 18px;
}

/* Map card */
.map-card {
  flex: 2;
  background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.015));
  padding: 14px;
  border-radius: 12px;
  box-shadow: inset 0 0 0 1px rgba(255,255,255,0.02), 0 12px 36px rgba(0,0,0,0.55);
  min-height: 440px;
  position: relative;
}

.map-placeholder {
  height: 420px;
  display:flex;
  align-items:center;
  justify-content:center;
  color:#BEEBD9;
}

/* Map container adjustments */
.map-container { width:100%; height:100%; min-height:420px; border-radius:10px; overflow:hidden; }

/* ================= InfoWindow & Google maps overrides =================
   We style the injected Google Maps InfoWindow so its content aligns left,
   shows revenue on the next line and uses our dashboard button styles.
   Using some !important is necessary because Google sets its own inline rules.
*/

/* ----- IMPORTANT: Remove internal Google shadow, scrollbar and grey strip ----- */
/* Make the info window containers transparent and let our .map-info-content handle visuals */
.gm-style .gm-style-iw,
.gm-style .gm-style-iw-c,
.gm-style .gm-style-iw-d {
  overflow: visible !important;   /* prevents internal scrollbars */
  padding: 0 !important;          /* remove google default padding */
  margin: 0 !important;
  background: transparent !important;
  box-shadow: none !important;
  border: none !important;
  max-width: none !important;
}

/* hide internal gm-style scrollbars (webkit) */
.gm-style .gm-style-iw *::-webkit-scrollbar { display: none !important; }

/* Also hide any forced scroll on the map info wrapper */
.gm-style-iw-d { overflow: visible !important; }

/* If Google adds their "shadow" wrapper, remove its background */
.gm-style .gm-style-iw-c > div { background: transparent !important; }

/* Make sure fonts and colors inside InfoWindow content (our markup) are readable */
.gm-style .gm-style-iw * {
  color: #05392f !important;
  font-weight: 600 !important;
  font-size: 13px !important;
  line-height: 1.2 !important;
}

/* Custom small wrapper classes (applies if you use same classnames inside InfoWindow content) */
.map-info-content {
  position: relative;               /* needed for absolute close button */
  overflow: visible;                /* show children outside box */
  max-width: 280px;                 /* prevent content from expanding too wide */
  padding: 16px 18px 18px 18px;
  background: #ffffff;
  border-radius: 10px;
  box-shadow: 0 6px 20px rgba(0,0,0,0.12);
  color: #0b2f24;
}

/* Top area with title + revenue stacked left */
.map-info-top {
  display: flex;
  flex-direction: column;
  gap: 4px;
  align-items: flex-start;
}

.map-info-title { font-weight: 700; margin-bottom: 6px; }
.map-info-revenue { font-weight: 700; color: #0b2f24; margin-bottom: 12px; }

.map-info-revenue span {
  color: #04593e;
  font-weight: 900;
}

/* Actions row - left aligned, small gap */
.map-info-actions {
  display: flex;
  gap: 12px;
  flex-wrap: nowrap;                /* don't wrap to new line (keeps layout stable) */
  align-items: center;
  margin-top: 6px;
}

/* Buttons inside info window: small variants of station buttons */
.map-info-btn {
  background: #e6f9ef;
  border: 0;
  padding: 8px 12px;
  border-radius: 8px;
  font-weight: 600;
  color: #0b2f24;
  white-space: nowrap;              /* prevent long labels wrapping */
  cursor: pointer;
  box-shadow: none;
}

/* Primary gradient (same family as StationList "View Details") */
.map-info-open {
  background: #eafef4;
  color: #003526;
  border: 1px solid rgba(0,0,0,0.04);
}

/* Secondary lighter variant */
.map-info-view {
  background: #eafef4;
  color: #003526;
  border: 1px solid rgba(0,0,0,0.04);
}
.map-info-footer { display: none; }

/* Hover states */
.map-info-open:hover { transform: translateY(-2px); box-shadow: 0 10px 26px rgba(0,119,255,0.12); }
.map-info-view:hover { transform: translateY(-2px); filter: brightness(0.98); }

/* Remove any default Google hover-effect "backplate" that produces the grey round behind X.
   If this selector exists in your Google-injected DOM we hide it. */
.gm-style .gm-ui-hover-effect { display: none !important; }

/* Also ensure the gm-info-window's inner shadow elements are transparent */
.gm-style .gm-style-iw-c .gm-style-iw-t::after,
.gm-style .gm-style-iw-c .gm-style-iw-t::before {
  background: transparent !important;
}

/* ----- InfoWindow close button (customized) ----- */
/* Your InfoWindow markup should render a button with class "info-close-button" inside .map-info-content.
   This style places it cleanly in the top-right outside the card, removes grey circle / shading, and prevents clipping. */
.info-close-button {
  position: absolute;
  top: -2px;               /* nudged up so it's in top-right corner outside card */
  right: -2px;             /* nudged right so it sits above the corner */
  width: 30px;
  height: 30px;
  border-radius: 50%;
  border: none;
  background: transparent;  /* remove grey background */
  color: #004d3d;
  font-weight: 700;
  font-size: 16px;
  line-height: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  box-shadow: none;         /* remove shadow completely */
  z-index: 2000;            /* ensure it sits above map & card */
  transition: color 0.15s ease, transform 0.1s ease;
}

.info-close-button:hover {
  color: #00ff88;
  transform: scale(1.1);
}

.info-close-button:active {
  transform: translateY(0);
}

/* ================= End InfoWindow section ================= */

/* KPI cards column */
.kpi-cards {
  flex: 1;
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 12px;
  align-content: start;
}

/* KPI card */
.kpi {
  background: linear-gradient(180deg,#08322a,#052a20);
  padding: 16px;
  border-radius: 12px;
  box-shadow: 0 12px 26px rgba(0,0,0,0.6);
  display:flex;
  flex-direction:column;
  justify-content:center;
  min-height: 96px;
}

.kpi-title { color:#AEEFD6; font-size:13px; margin-bottom:6px; }
.kpi-value { font-size:24px; font-weight:900; color:#F7FFF9; letter-spacing:0.2px; }

/* ---------------- Charts Row (two-chart layout) ---------------- */
.charts-row {
  display: grid;
  grid-template-columns: 1.6fr 0.9fr;
  gap: 12px;
  margin-top: 18px;
  align-items: start;
}

.chart-card {
  background: linear-gradient(180deg,#071918,#041514);
  padding: 14px;
  border-radius: 12px;
  min-height: 260px;
  box-shadow: 0 12px 36px rgba(0,0,0,0.6);
  color: #E6FFF4;
}

.chart-card.small { min-height: 260px; }

.chart-card h3 { margin: 0 0 10px 0; color: #E8FFF0; font-size: 16px; }

/* Chart legend (if you add a custom legend container) */
.chart-legend {
  color: #E6FFF2;
  font-size: 13px;
  display:flex;
  flex-direction:column;
  gap:6px;
}
.chart-legend .item { display:flex; gap:8px; align-items:center; }
.chart-legend .swatch { width:12px; height:12px; border-radius:3px; }

/* Map info buttons — (legacy class kept for compatibility) */
.map-info-btn {
  padding: 8px 10px;
  border-radius: 8px;
  font-weight: 700;
  cursor: pointer;
}

/* Button secondary helper */
.map-info-btn.secondary {
  background: transparent;
  color: #06423a;
  border: 1px solid rgba(6,66,58,0.08);
}

/* ---------------- Station list fallback card ---------------- */
.station-list-page {
  background: linear-gradient(180deg,#081818,#061315);
  padding: 12px;
  border-radius: 10px;
}

/* ---------------- Modal & helpers ---------------- */
.modal-overlay { background: rgba(1,6,5,0.7) !important; }
.modal-content {
  background: linear-gradient(180deg,#042824,#031a14);
  color: #e8ffef;
  border-radius: 10px;
  padding: 16px;
  max-width: 960px;
  margin: 32px auto;
}

/* Error and loading classes */
.fetch-error { color:#ffb3b3; background: rgba(255,75,75,0.04); padding:8px 12px; border-radius:6px; margin-bottom:8px; }
.loading { color:#cfe9d8; padding:10px 12px; }
.reports-section { padding:16px; background:#041815; border-radius:8px; color:#cfe9d8; }

/* ---------------- Responsive ---------------- */
@media (max-width: 1100px) {
  .charts-row { grid-template-columns: 1fr 1fr; }
  .kpi-cards { grid-template-columns: 1fr; }
}

@media (max-width: 820px) {
  .company-dashboard-root { flex-direction: column; }
  .cd-sidebar, .sidebar { width:100%; flex-direction:row; align-items:center; justify-content:space-between; padding:10px; }
  .cd-nav, .sidebar-nav { flex-direction: row; gap: 12px; border-top: none; padding-top: 0; }
  .top-row { flex-direction: column; }
  .charts-row { grid-template-columns: 1fr; }
  .map-card { min-height: 300px; }
  .map-placeholder { height: 300px; }
}

/* ---------------- Misc utilities ---------------- */
.btn { padding: 8px 10px; border-radius: 8px; border: none; cursor: pointer; }
.small-btn { padding: 6px 8px; font-size: 13px; }

/* NOTE: removed forced hide for images — allows dashboard images to display */
/* .image-container, .image-wrapper, .dashboard-image { display: none !important; } */

/* Ensure charts render nicely on mobile */
canvas { max-width: 100% !important; display: block; }

/* Slightly larger fonts for chart tooltips container (Chart.js tooltips use canvas but this is safe) */
.chartjs-tooltip { font-size: 13px !important; color: #e8fff4 !important; }
